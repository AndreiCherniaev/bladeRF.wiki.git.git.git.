= How to Build Gnuradio 3.7.1 from Git =

<span style="color:red">WORK IN PROGRESS</span>

This is a walkthrough of how to build gnuradio v3.7.1.

== Install GNURadio package dependencies.. ==

On Debian based Distros:
<pre>
sudo apt-get -y install git-core autoconf automake  libtool g++ python-dev swig \
pkg-config libfftw3-dev libboost1.53-all-dev libcppunit-dev libgsl0-dev \
libusb-dev sdcc libsdl1.2-dev python-wxgtk2.8 python-numpy \
python-cheetah python-lxml doxygen python-qt4 python-qwt5-qt4 libxi-dev \
libqt4-opengl-dev libqwt5-qt4-dev libfontconfig1-dev libxrender-dev \
python-gtk2 python-gtk2-dev
</pre>

On Redhat based Distros:
( TODO )

== git clone gnuradio repo ==
<pre>
mkdir ~/sandbox
cd ~/sandbox
git clone https://github.com/gnuradio/gnuradio.git ./gnuradio
</pre>

== checkout version v3.7.1 release ==
<pre>
cd gnuradio
git checkout tags/v3.7.1
</pre>

== build gnuradio ==
<pre>
mkdir build
cd build
cmake -DCMAKE_INSTALL_PREFIX=/opt/gnuradio-3.7.1 ../
make -j4
sudo make install
</pre>

== add gnuradio to path and library search ==

<pre>
sudo vi /etc/profile.d/gnuradio.sh
</pre>
put the following in it:
<pre>
#!/bin/bash

# add gnuradio stuff to path
export PATH=$PATH:/opt/gnuradio-3.7.1/bin

# add gnuradio python libraries to python search path
if [ $PYTHONPATH ]; then
        export PYTHONPATH=$PYTHONPATH:/opt/gnuradio-3.7.1/lib/python2.7/dist-packages
else
        export PYTHONPATH=/opt/gnuradio-3.7.1/lib/python2.7/dist-packages
fi

# Add gnuradio to pkg_config path
if [ $PKG_CONFIG_PATH ]; then
        export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/opt/gnuradio-3.7.1//lib/pkgconfig/
else
        export PKG_CONFIG_PATH=/opt/gnuradio-3.7.1//lib/pkgconfig/
fi
</pre>

* now add gnuradio libraries to library search path
create a new file in /etc/ld.so.conf.d/gnuradio.conf
<pre>
sudo vi /etc/ld.so.conf.d/gnuradio.conf
</pre>
put the following line in it:
<pre>
/opt/gnuradio-3.7.1/lib
</pre>

update library cache by running "sudo ldconfig"

== Build gr-osmosdr sink/source ==
clone the gr-osmosdr git repo to sandbox
<pre>
cd ~/sandbox
git clone git://git.osmocom.org/gr-osmosdr ./gr-osmosdr
</pre>

<pre>
mkdir ~/sandbox/gr-osmosdr/build
cd ~/sandbox/gr-osmosdr/build
cmake -DLIBBLADERF_PKG_INCLUDE_DIRS=/opt/bladeRF/include/ -DLIBBLADERF_PKG_LIBRARY_DIRS=/opt/bladeRF/lib/ -DCMAKE_INSTALL_PREFIX=/opt/gnuradio-3.7.1 ../
make
sudo make install
</pre>

Then run "sudo ldconfig -v | grep osmo" to update library cache.

* give osmocom_fft a test run and see if all good
<pre>
osmocom_fft -a bladerf=0,fpga=/opt/bladeRF/fpga/hostedx40.rbf -s 8000000 -f 915000000
</pre>
note: I store my fpga images in /opt/bladeRF/fpga/  ( I use hoopycat's bladeRF build bot outputs )
{ http://hoopycat.com/bladerf_builds/ }

note: you can also add a fw=/opt/bladeRF/firmware/latest.bin to load an updated firmware if needed